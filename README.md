# GDPR-Opt-in
A Google Tag Manager Script designed to put a GDPR-compliant banner on any website. It has the ability to add additional options and work with any tracking API to prevent the use of tracking

Notes:
Refference - https://developers.google.com/tag-platform/tag-manager/templates/consent-apis
API Docs - https://developers.google.com/tag-platform/tag-manager/templates/api


# How to Install
**Step 1.**
Create a new folder to contain the following things

**Step 2.**
Create a new Tag Template
Copy the text from gdpr-processor_template.js

**Step 3.**
Set Tag Template Permissions
Access Consent State - All Content types, Read and Write
Global Variables - {consentUpdate: [Execute], showConsentBanner: [Execute]}

**Step 4.**
Create a new Tag based on the previously created template

**Step 5.**
Create a new Custom HTML Tag
Copy the text from gdpr-banner_tag.html
that fires on consent itialization
make template tag created in step 4 fire AFTER this tag

**Step 6.**
Test the full enviorment

# How It works
The System works in two parts, Part one handles the frontend interface and part two handles the data send to Google. The API to update google can only be handled from within a tag template, and the frontend interface can only be generated by a standard HTML tag, thus the two parts are necicary.

The frontend calls the backend by using a callback queue. Functions can be added to the queue by calling `window.consentUpdate({Callback})` and the queue is executed by calling `onConsentChange({consent options})`. when the backend loads, a function containing template code is added to the queue and thus can be executed on events controlled by user interaction with the frontend. 

additional callbacks can be added to allow updating GDPR prefferences of any additional tracking software implemented.